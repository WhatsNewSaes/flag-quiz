// Visual features for flag similarity matching in Jeopardy hard mode

export type FlagColor = 'red' | 'blue' | 'green' | 'yellow' | 'white' | 'black' | 'orange' | 'maroon';
export type FlagPattern = 'horizontal-stripes' | 'vertical-stripes' | 'diagonal' | 'cross' | 'canton' | 'solid' | 'complex';

export interface FlagFeatures {
  colors: FlagColor[];
  pattern: FlagPattern;
}

// Map of country code to flag features
export const flagFeatures: Record<string, FlagFeatures> = {
  // Africa
  DZ: { colors: ['green', 'white', 'red'], pattern: 'vertical-stripes' },
  AO: { colors: ['red', 'black', 'yellow'], pattern: 'horizontal-stripes' },
  BJ: { colors: ['green', 'yellow', 'red'], pattern: 'vertical-stripes' },
  BW: { colors: ['blue', 'white', 'black'], pattern: 'horizontal-stripes' },
  BF: { colors: ['red', 'green', 'yellow'], pattern: 'horizontal-stripes' },
  BI: { colors: ['red', 'green', 'white'], pattern: 'diagonal' },
  CM: { colors: ['green', 'red', 'yellow'], pattern: 'vertical-stripes' },
  CV: { colors: ['blue', 'white', 'red'], pattern: 'horizontal-stripes' },
  CF: { colors: ['blue', 'white', 'green', 'yellow', 'red'], pattern: 'horizontal-stripes' },
  TD: { colors: ['blue', 'yellow', 'red'], pattern: 'vertical-stripes' },
  KM: { colors: ['green', 'white', 'red', 'blue', 'yellow'], pattern: 'horizontal-stripes' },
  CD: { colors: ['blue', 'red', 'yellow'], pattern: 'diagonal' },
  CG: { colors: ['green', 'yellow', 'red'], pattern: 'diagonal' },
  DJ: { colors: ['blue', 'green', 'white', 'red'], pattern: 'complex' },
  EG: { colors: ['red', 'white', 'black'], pattern: 'horizontal-stripes' },
  GQ: { colors: ['green', 'white', 'red', 'blue'], pattern: 'horizontal-stripes' },
  ER: { colors: ['green', 'blue', 'red'], pattern: 'diagonal' },
  SZ: { colors: ['blue', 'yellow', 'red', 'black', 'white'], pattern: 'horizontal-stripes' },
  ET: { colors: ['green', 'yellow', 'red', 'blue'], pattern: 'horizontal-stripes' },
  GA: { colors: ['green', 'yellow', 'blue'], pattern: 'horizontal-stripes' },
  GM: { colors: ['red', 'blue', 'green', 'white'], pattern: 'horizontal-stripes' },
  GH: { colors: ['red', 'yellow', 'green', 'black'], pattern: 'horizontal-stripes' },
  GN: { colors: ['red', 'yellow', 'green'], pattern: 'vertical-stripes' },
  GW: { colors: ['red', 'yellow', 'green', 'black'], pattern: 'vertical-stripes' },
  CI: { colors: ['orange', 'white', 'green'], pattern: 'vertical-stripes' },
  KE: { colors: ['black', 'red', 'green', 'white'], pattern: 'horizontal-stripes' },
  LS: { colors: ['blue', 'white', 'green', 'black'], pattern: 'horizontal-stripes' },
  LR: { colors: ['red', 'white', 'blue'], pattern: 'horizontal-stripes' },
  LY: { colors: ['red', 'black', 'green', 'white'], pattern: 'horizontal-stripes' },
  MG: { colors: ['red', 'green', 'white'], pattern: 'vertical-stripes' },
  MW: { colors: ['black', 'red', 'green'], pattern: 'horizontal-stripes' },
  ML: { colors: ['green', 'yellow', 'red'], pattern: 'vertical-stripes' },
  MR: { colors: ['green', 'yellow', 'red'], pattern: 'solid' },
  MU: { colors: ['red', 'blue', 'yellow', 'green'], pattern: 'horizontal-stripes' },
  MA: { colors: ['red', 'green'], pattern: 'solid' },
  MZ: { colors: ['green', 'black', 'yellow', 'white', 'red'], pattern: 'horizontal-stripes' },
  NA: { colors: ['blue', 'red', 'green', 'white', 'yellow'], pattern: 'diagonal' },
  NE: { colors: ['orange', 'white', 'green'], pattern: 'horizontal-stripes' },
  NG: { colors: ['green', 'white'], pattern: 'vertical-stripes' },
  RW: { colors: ['blue', 'yellow', 'green'], pattern: 'horizontal-stripes' },
  ST: { colors: ['green', 'yellow', 'red', 'black'], pattern: 'horizontal-stripes' },
  SN: { colors: ['green', 'yellow', 'red'], pattern: 'vertical-stripes' },
  SC: { colors: ['blue', 'yellow', 'red', 'white', 'green'], pattern: 'diagonal' },
  SL: { colors: ['green', 'white', 'blue'], pattern: 'horizontal-stripes' },
  SO: { colors: ['blue', 'white'], pattern: 'solid' },
  ZA: { colors: ['red', 'blue', 'green', 'yellow', 'black', 'white'], pattern: 'complex' },
  SS: { colors: ['black', 'red', 'green', 'white', 'blue', 'yellow'], pattern: 'horizontal-stripes' },
  SD: { colors: ['red', 'white', 'black', 'green'], pattern: 'horizontal-stripes' },
  TZ: { colors: ['green', 'blue', 'black', 'yellow'], pattern: 'diagonal' },
  TG: { colors: ['green', 'yellow', 'red', 'white'], pattern: 'horizontal-stripes' },
  TN: { colors: ['red', 'white'], pattern: 'solid' },
  UG: { colors: ['black', 'yellow', 'red', 'white'], pattern: 'horizontal-stripes' },
  ZM: { colors: ['green', 'red', 'black', 'orange'], pattern: 'solid' },
  ZW: { colors: ['green', 'yellow', 'red', 'black', 'white'], pattern: 'horizontal-stripes' },

  // Asia
  AF: { colors: ['black', 'red', 'green', 'white'], pattern: 'vertical-stripes' },
  AM: { colors: ['red', 'blue', 'orange'], pattern: 'horizontal-stripes' },
  AZ: { colors: ['blue', 'red', 'green', 'white'], pattern: 'horizontal-stripes' },
  BH: { colors: ['red', 'white'], pattern: 'vertical-stripes' },
  BD: { colors: ['green', 'red'], pattern: 'solid' },
  BT: { colors: ['orange', 'yellow', 'white'], pattern: 'diagonal' },
  BN: { colors: ['yellow', 'white', 'black', 'red'], pattern: 'diagonal' },
  KH: { colors: ['blue', 'red', 'white'], pattern: 'horizontal-stripes' },
  CN: { colors: ['red', 'yellow'], pattern: 'solid' },
  CY: { colors: ['white', 'orange', 'green'], pattern: 'solid' },
  GE: { colors: ['white', 'red'], pattern: 'cross' },
  IN: { colors: ['orange', 'white', 'green', 'blue'], pattern: 'horizontal-stripes' },
  ID: { colors: ['red', 'white'], pattern: 'horizontal-stripes' },
  IR: { colors: ['green', 'white', 'red'], pattern: 'horizontal-stripes' },
  IQ: { colors: ['red', 'white', 'black', 'green'], pattern: 'horizontal-stripes' },
  IL: { colors: ['blue', 'white'], pattern: 'horizontal-stripes' },
  JP: { colors: ['white', 'red'], pattern: 'solid' },
  JO: { colors: ['black', 'white', 'green', 'red'], pattern: 'horizontal-stripes' },
  KZ: { colors: ['blue', 'yellow'], pattern: 'solid' },
  KW: { colors: ['green', 'white', 'red', 'black'], pattern: 'horizontal-stripes' },
  KG: { colors: ['red', 'yellow'], pattern: 'solid' },
  LA: { colors: ['red', 'blue', 'white'], pattern: 'horizontal-stripes' },
  LB: { colors: ['red', 'white', 'green'], pattern: 'horizontal-stripes' },
  MY: { colors: ['red', 'white', 'blue', 'yellow'], pattern: 'horizontal-stripes' },
  MV: { colors: ['red', 'green', 'white'], pattern: 'solid' },
  MN: { colors: ['red', 'blue', 'yellow'], pattern: 'vertical-stripes' },
  MM: { colors: ['yellow', 'green', 'red', 'white'], pattern: 'horizontal-stripes' },
  NP: { colors: ['red', 'blue', 'white'], pattern: 'complex' },
  KP: { colors: ['blue', 'red', 'white'], pattern: 'horizontal-stripes' },
  OM: { colors: ['red', 'white', 'green'], pattern: 'vertical-stripes' },
  PK: { colors: ['green', 'white'], pattern: 'vertical-stripes' },
  PS: { colors: ['black', 'white', 'green', 'red'], pattern: 'horizontal-stripes' },
  PH: { colors: ['blue', 'red', 'white', 'yellow'], pattern: 'horizontal-stripes' },
  QA: { colors: ['maroon', 'white'], pattern: 'vertical-stripes' },
  SA: { colors: ['green', 'white'], pattern: 'solid' },
  SG: { colors: ['red', 'white'], pattern: 'horizontal-stripes' },
  KR: { colors: ['white', 'red', 'blue', 'black'], pattern: 'solid' },
  LK: { colors: ['maroon', 'orange', 'yellow', 'green'], pattern: 'complex' },
  SY: { colors: ['red', 'white', 'black', 'green'], pattern: 'horizontal-stripes' },
  TW: { colors: ['red', 'blue', 'white'], pattern: 'canton' },
  TJ: { colors: ['red', 'white', 'green', 'yellow'], pattern: 'horizontal-stripes' },
  TH: { colors: ['red', 'white', 'blue'], pattern: 'horizontal-stripes' },
  TL: { colors: ['red', 'yellow', 'black', 'white'], pattern: 'complex' },
  TR: { colors: ['red', 'white'], pattern: 'solid' },
  TM: { colors: ['green', 'red', 'white'], pattern: 'solid' },
  AE: { colors: ['red', 'green', 'white', 'black'], pattern: 'horizontal-stripes' },
  UZ: { colors: ['blue', 'white', 'green', 'red'], pattern: 'horizontal-stripes' },
  VN: { colors: ['red', 'yellow'], pattern: 'solid' },
  YE: { colors: ['red', 'white', 'black'], pattern: 'horizontal-stripes' },

  // Europe
  AL: { colors: ['red', 'black'], pattern: 'solid' },
  AD: { colors: ['blue', 'yellow', 'red'], pattern: 'vertical-stripes' },
  AT: { colors: ['red', 'white'], pattern: 'horizontal-stripes' },
  BY: { colors: ['red', 'green', 'white'], pattern: 'horizontal-stripes' },
  BE: { colors: ['black', 'yellow', 'red'], pattern: 'vertical-stripes' },
  BA: { colors: ['blue', 'yellow', 'white'], pattern: 'diagonal' },
  BG: { colors: ['white', 'green', 'red'], pattern: 'horizontal-stripes' },
  HR: { colors: ['red', 'white', 'blue'], pattern: 'horizontal-stripes' },
  CZ: { colors: ['white', 'red', 'blue'], pattern: 'horizontal-stripes' },
  DK: { colors: ['red', 'white'], pattern: 'cross' },
  EE: { colors: ['blue', 'black', 'white'], pattern: 'horizontal-stripes' },
  FI: { colors: ['white', 'blue'], pattern: 'cross' },
  FR: { colors: ['blue', 'white', 'red'], pattern: 'vertical-stripes' },
  DE: { colors: ['black', 'red', 'yellow'], pattern: 'horizontal-stripes' },
  GR: { colors: ['blue', 'white'], pattern: 'horizontal-stripes' },
  HU: { colors: ['red', 'white', 'green'], pattern: 'horizontal-stripes' },
  IS: { colors: ['blue', 'white', 'red'], pattern: 'cross' },
  IE: { colors: ['green', 'white', 'orange'], pattern: 'vertical-stripes' },
  IT: { colors: ['green', 'white', 'red'], pattern: 'vertical-stripes' },
  XK: { colors: ['blue', 'yellow', 'white'], pattern: 'solid' },
  LV: { colors: ['maroon', 'white'], pattern: 'horizontal-stripes' },
  LI: { colors: ['blue', 'red', 'yellow'], pattern: 'horizontal-stripes' },
  LT: { colors: ['yellow', 'green', 'red'], pattern: 'horizontal-stripes' },
  LU: { colors: ['red', 'white', 'blue'], pattern: 'horizontal-stripes' },
  MT: { colors: ['white', 'red'], pattern: 'vertical-stripes' },
  MD: { colors: ['blue', 'yellow', 'red'], pattern: 'vertical-stripes' },
  MC: { colors: ['red', 'white'], pattern: 'horizontal-stripes' },
  ME: { colors: ['red', 'yellow'], pattern: 'solid' },
  NL: { colors: ['red', 'white', 'blue'], pattern: 'horizontal-stripes' },
  MK: { colors: ['red', 'yellow'], pattern: 'solid' },
  NO: { colors: ['red', 'white', 'blue'], pattern: 'cross' },
  PL: { colors: ['white', 'red'], pattern: 'horizontal-stripes' },
  PT: { colors: ['green', 'red', 'yellow'], pattern: 'vertical-stripes' },
  RO: { colors: ['blue', 'yellow', 'red'], pattern: 'vertical-stripes' },
  RU: { colors: ['white', 'blue', 'red'], pattern: 'horizontal-stripes' },
  SM: { colors: ['white', 'blue'], pattern: 'horizontal-stripes' },
  RS: { colors: ['red', 'blue', 'white'], pattern: 'horizontal-stripes' },
  SK: { colors: ['white', 'blue', 'red'], pattern: 'horizontal-stripes' },
  SI: { colors: ['white', 'blue', 'red'], pattern: 'horizontal-stripes' },
  ES: { colors: ['red', 'yellow'], pattern: 'horizontal-stripes' },
  SE: { colors: ['blue', 'yellow'], pattern: 'cross' },
  CH: { colors: ['red', 'white'], pattern: 'solid' },
  UA: { colors: ['blue', 'yellow'], pattern: 'horizontal-stripes' },
  GB: { colors: ['red', 'white', 'blue'], pattern: 'cross' },
  VA: { colors: ['yellow', 'white'], pattern: 'vertical-stripes' },

  // North America
  AG: { colors: ['red', 'black', 'blue', 'yellow', 'white'], pattern: 'complex' },
  BS: { colors: ['blue', 'yellow', 'black'], pattern: 'horizontal-stripes' },
  BB: { colors: ['blue', 'yellow', 'black'], pattern: 'vertical-stripes' },
  BZ: { colors: ['blue', 'red', 'white'], pattern: 'horizontal-stripes' },
  CA: { colors: ['red', 'white'], pattern: 'vertical-stripes' },
  CR: { colors: ['blue', 'white', 'red'], pattern: 'horizontal-stripes' },
  CU: { colors: ['blue', 'white', 'red'], pattern: 'horizontal-stripes' },
  DM: { colors: ['green', 'yellow', 'black', 'white', 'red'], pattern: 'cross' },
  DO: { colors: ['blue', 'red', 'white'], pattern: 'cross' },
  SV: { colors: ['blue', 'white'], pattern: 'horizontal-stripes' },
  GD: { colors: ['red', 'yellow', 'green'], pattern: 'complex' },
  GT: { colors: ['blue', 'white'], pattern: 'vertical-stripes' },
  HT: { colors: ['blue', 'red'], pattern: 'horizontal-stripes' },
  HN: { colors: ['blue', 'white'], pattern: 'horizontal-stripes' },
  JM: { colors: ['green', 'yellow', 'black'], pattern: 'diagonal' },
  MX: { colors: ['green', 'white', 'red'], pattern: 'vertical-stripes' },
  NI: { colors: ['blue', 'white'], pattern: 'horizontal-stripes' },
  PA: { colors: ['red', 'white', 'blue'], pattern: 'complex' },
  KN: { colors: ['green', 'red', 'yellow', 'black', 'white'], pattern: 'diagonal' },
  LC: { colors: ['blue', 'yellow', 'black', 'white'], pattern: 'solid' },
  VC: { colors: ['blue', 'yellow', 'green'], pattern: 'vertical-stripes' },
  TT: { colors: ['red', 'white', 'black'], pattern: 'diagonal' },
  US: { colors: ['red', 'white', 'blue'], pattern: 'canton' },

  // South America
  AR: { colors: ['blue', 'white', 'yellow'], pattern: 'horizontal-stripes' },
  BO: { colors: ['red', 'yellow', 'green'], pattern: 'horizontal-stripes' },
  BR: { colors: ['green', 'yellow', 'blue', 'white'], pattern: 'solid' },
  CL: { colors: ['red', 'white', 'blue'], pattern: 'horizontal-stripes' },
  CO: { colors: ['yellow', 'blue', 'red'], pattern: 'horizontal-stripes' },
  EC: { colors: ['yellow', 'blue', 'red'], pattern: 'horizontal-stripes' },
  GY: { colors: ['green', 'yellow', 'red', 'black', 'white'], pattern: 'diagonal' },
  PY: { colors: ['red', 'white', 'blue'], pattern: 'horizontal-stripes' },
  PE: { colors: ['red', 'white'], pattern: 'vertical-stripes' },
  SR: { colors: ['green', 'white', 'red', 'yellow'], pattern: 'horizontal-stripes' },
  UY: { colors: ['white', 'blue', 'yellow'], pattern: 'horizontal-stripes' },
  VE: { colors: ['yellow', 'blue', 'red', 'white'], pattern: 'horizontal-stripes' },

  // Oceania
  AU: { colors: ['blue', 'red', 'white'], pattern: 'canton' },
  FJ: { colors: ['blue', 'red', 'white'], pattern: 'canton' },
  KI: { colors: ['red', 'blue', 'yellow', 'white'], pattern: 'horizontal-stripes' },
  MH: { colors: ['blue', 'orange', 'white'], pattern: 'diagonal' },
  FM: { colors: ['blue', 'white'], pattern: 'solid' },
  NR: { colors: ['blue', 'yellow', 'white'], pattern: 'horizontal-stripes' },
  NZ: { colors: ['blue', 'red', 'white'], pattern: 'canton' },
  PW: { colors: ['blue', 'yellow'], pattern: 'solid' },
  PG: { colors: ['red', 'black', 'yellow', 'white'], pattern: 'diagonal' },
  WS: { colors: ['red', 'blue', 'white'], pattern: 'canton' },
  SB: { colors: ['blue', 'green', 'yellow', 'white'], pattern: 'diagonal' },
  TO: { colors: ['red', 'white'], pattern: 'canton' },
  TV: { colors: ['blue', 'yellow', 'white'], pattern: 'canton' },
  VU: { colors: ['red', 'green', 'black', 'yellow'], pattern: 'complex' },
};

// Helper function to find similar flags
export function getSimilarFlags(countryCode: string, allCountryCodes: string[]): string[] {
  const targetFeatures = flagFeatures[countryCode];
  if (!targetFeatures) return [];

  return allCountryCodes.filter(code => {
    if (code === countryCode) return false;
    const features = flagFeatures[code];
    if (!features) return false;

    // Same pattern is required
    if (features.pattern !== targetFeatures.pattern) return false;

    // Count shared colors
    const sharedColors = targetFeatures.colors.filter(c => features.colors.includes(c));

    // Need at least 2 shared colors
    return sharedColors.length >= 2;
  });
}
